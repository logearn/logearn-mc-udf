package cn.xlystar.mc.udf;

import cn.xlystar.helpers.ChainConfig;
import cn.xlystar.helpers.ConfigHelper;
import cn.xlystar.parse.ammswap.AMMSwapDataProcess;
import com.alibaba.fastjson.JSON;
import com.aliyun.odps.udf.UDF;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * 计算引擎：maxCompute
 * amm_parse(String chainId, String protocol, String logs, String internalTxs, String hash)
 * <p>
 * num1：数值1
 * num2：数值1
 * scale: 小数点位数
 */
public class AMMParse extends UDF {

    public AMMParse() {
    }

    public String evaluate(String originSender, String chainId, String protocol, String logs, String internalTxs, String hash, String price) throws IOException {
        ChainConfig conf = new ConfigHelper().getConfig(chainId, protocol);
        List<Map<String, String>> maps = new ArrayList<>();
        String res = "";
        if (logs.length() >= 1048576 || internalTxs.length() >= 1048576) return res;
        try {
            maps = AMMSwapDataProcess.decodeInputData(conf, "", originSender, "", "", logs, internalTxs, hash, price);
            res = JSON.toJSONString(maps);
        } catch (Exception e) {
            e.printStackTrace();
            throw new RuntimeException(String.format("msg:%s, hash:%s. logs:%s, internalTxs:%s, conf:%s, ", e.getMessage(), hash, logs, internalTxs, conf));
        } catch (StackOverflowError | OutOfMemoryError e) {
            e.printStackTrace();
            maps = new ArrayList<>();
            HashMap<String, String> errorSwap = new HashMap<>();
            errorSwap.put("errorMsg", "oom");
            errorSwap.put("chain", chainId);
            errorSwap.put("protocol", protocol);
            maps.add(errorSwap);
            throw new RuntimeException(String.format("msg:%s, hash:%s. logs:%s, internalTxs:%s, conf:%s ", e.getMessage(), hash, logs, internalTxs, conf));
        }
        return res;
    }

    public static void main(String[] args) throws Exception {
        AMMParse ammParse = new AMMParse();
        String logs = "{\"logs\":[{\"address\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"data\":\"0x00000000000000000000000000000000000000000000005783ffc050bf97196a00000000000000000000000000000000000000000000000000000423fd1bdafe\",\"logindex\":\"0xbc\",\"topics\":[\"0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1\"]},{\"address\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"data\":\"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000642e5369cbc790000000000000000000000000000000000000000000000001f2c25657e86b7e10000000000000000000000000000000000000000000000000000000000000000\",\"logindex\":\"0xc0\",\"topics\":[\"0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822\",\"0x0000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"0x0000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\"]},{\"address\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"data\":\"0x000000000000000000000000000000000000000000000000e6f9ab08aa0a7929\",\"logindex\":\"0xc1\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x0000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"0x000000000000000000000000ba91a189a713d3d0aad89c8202fa6d98fd763820\"]},{\"address\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"data\":\"0x000000000000000000000000000000000000000000000059528d2459c20cdaee\",\"logindex\":\"0xc2\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x0000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"0x000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd\"]},{\"address\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"data\":\"0x0000000000000000000000000000000000000000000000000000000000003a98\",\"logindex\":\"0xb8\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd\",\"0x000000000000000000000000dda155b76fd2793d4ee6eccdd35708d55f3b84da\"]},{\"address\":\"0x4200000000000000000000000000000000000006\",\"data\":\"0x000000000000000000000000000000000000000000000000000642e5369cbc79\",\"logindex\":\"0xbb\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x00000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"0x000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667\"]},{\"address\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"data\":\"0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004c10a8000000000000000000000000000000000000000000000000000642e5369cbc790000000000000000000000000000000000000000000000000000000000000000\",\"logindex\":\"0xbd\",\"topics\":[\"0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822\",\"0x0000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"0x000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667\"]},{\"address\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"data\":\"0x000000000000000000000000000000000000000000020307a2dfe1d76c207c8e000000000000000000000000000000000000000000000067238b85ebd8c7ac1b\",\"logindex\":\"0xbf\",\"topics\":[\"0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1\"]},{\"address\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"data\":\"0x00000000000000000000000000000000000000000000123635ae5ece19d5402800000000000000000000000000000000000000000034de6dcec110562a35f4e2\",\"logindex\":\"0xc3\",\"topics\":[\"0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1\"]},{\"address\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"data\":\"0x00000000000000000000000000000000000000000000000000000000004c10a8\",\"logindex\":\"0xba\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f73\",\"0x00000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c\"]},{\"address\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"data\":\"0x00000000000000000000000000000000000000000000000000000000004c10a8\",\"logindex\":\"0xb9\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd\",\"0x000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f73\"]},{\"address\":\"0x0b3e328455c4059eeb9e3f84b5543f74e24e7e1b\",\"data\":\"0x0000000000000000000000000000000000000000000000001f2c25657e86b7e1\",\"logindex\":\"0xbe\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\"0x000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667\",\"0x0000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\"]},{\"address\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"data\":\"0x0000000000000000000000000000000000000000000000001f2c25657e86b7e10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005a3986cf626c175417\",\"logindex\":\"0xc4\",\"topics\":[\"0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822\",\"0x0000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"0x000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd\"]},{\"address\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"data\":\"0x000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda02913000000000000000000000000ba91a189a713d3d0aad89c8202fa6d98fd7638200000000000000000000000000000000000000000000000000000000000003a98000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda0291300000000000000000000000000000000000000000000005a3986cf626c175417000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd\",\"logindex\":\"0xc5\",\"topics\":[\"0xc4f2db0bfdf74019c82ce61ce7255ecac93acc22b7c68160c89edf1f88ec416a\",\"0x0000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\"]}]}";
        String tract = "[{\"action\":{\"from\":\"0xa2460f1530139f1cc712d5d1ac9b82cc879271fd\",\"to\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"input\":\"0xcba9bc66000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f730000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad2400000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000004c4b400000000000000000000000000000000000000000000000593e18400cb19dd41c000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda0291300000000000000000000000042000000000000000000000000000000000000060000000000000000000000000b3e328455c4059eeb9e3f84b5543f74e24e7e1b000000000000000000000000ba91a189a713d3d0aad89c8202fa6d98fd7638200000000000000000000000000000000000000000000000000000000000000000\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"input\":\"0x022c0d9f0000000000000000000000000000000000000000000000001f2c25657e86b7e100000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x70a08231000000000000000000000000de44500b5d1479df5c003bf48915b3e24df3e8dd\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0xf4763b092a0045e3ef31894bfd283ce1e9960f73\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0xdd62ed3e000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f730000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"to\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"input\":\"0x70a082310000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"input\":\"0x022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005a3986cf626c175417000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"input\":\"0x0902f1ac\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"to\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"input\":\"0xa9059cbb000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd00000000000000000000000000000000000000000000005a3986cf626c175417\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x23b872dd000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f7300000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c00000000000000000000000000000000000000000000000000000000004c10a8\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x70a0823100000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x70a08231000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f73\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x70a0823100000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0xf4763b092a0045e3ef31894bfd283ce1e9960f73\",\"to\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"input\":\"0x38ed173900000000000000000000000000000000000000000000000000000000004c10a80000000000000000000000000000000000000000000000593e18400cb19dd41c00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd000000000000000000000000000000000000000000000000000000006849dbdd0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda0291300000000000000000000000042000000000000000000000000000000000000060000000000000000000000000b3e328455c4059eeb9e3f84b5543f74e24e7e1b000000000000000000000000ba91a189a713d3d0aad89c8202fa6d98fd763820\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0xf4763b092a0045e3ef31894bfd283ce1e9960f73\",\"to\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"input\":\"0xad5c4648\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"to\":\"0x0b3e328455c4059eeb9e3f84b5543f74e24e7e1b\",\"input\":\"0x70a08231000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"to\":\"0x4200000000000000000000000000000000000006\",\"input\":\"0x70a08231000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"input\":\"0x022c0d9f000000000000000000000000000000000000000000000000000642e5369cbc790000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da66700000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x23b872dd000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f7300000000000000000000000000000000000000000000000000000000004c10a8\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x70a08231000000000000000000000000de44500b5d1479df5c003bf48915b3e24df3e8dd\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x23b872dd000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd000000000000000000000000dda155b76fd2793d4ee6eccdd35708d55f3b84da0000000000000000000000000000000000000000000000000000000000003a98\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"input\":\"0x0902f1ac\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"to\":\"0x4200000000000000000000000000000000000006\",\"input\":\"0x70a0823100000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xe31c372a7af875b3b5e0f3713b17ef51556da667\",\"to\":\"0x0b3e328455c4059eeb9e3f84b5543f74e24e7e1b\",\"input\":\"0xa9059cbb0000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a0000000000000000000000000000000000000000000000001f2c25657e86b7e1\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"to\":\"0xf4763b092a0045e3ef31894bfd283ce1e9960f73\",\"input\":\"0x3da665f30000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad2400000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000004c10a8000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd0000000000000000000000000000000000000000000000593e18400cb19dd41c00000000000000000000000000000000000000000000000000000000000002580000000000000000000000000000000000000000000000000000000000000004000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda0291300000000000000000000000042000000000000000000000000000000000000060000000000000000000000000b3e328455c4059eeb9e3f84b5543f74e24e7e1b000000000000000000000000ba91a189a713d3d0aad89c8202fa6d98fd7638200000000000000000000000000000000000000000000000000000000000000000\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"to\":\"0x9215e9a88c94b9dcad5b02e32cd5cab2a291458b\",\"input\":\"0x70a082310000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x70a08231000000000000000000000000de44500b5d1479df5c003bf48915b3e24df3e8dd\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x23b872dd000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd000000000000000000000000dda155b76fd2793d4ee6eccdd35708d55f3b84da0000000000000000000000000000000000000000000000000000000000003a98\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0x23b872dd000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f7300000000000000000000000000000000000000000000000000000000004c10a8\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"to\":\"0x4200000000000000000000000000000000000006\",\"input\":\"0xa9059cbb000000000000000000000000e31c372a7af875b3b5e0f3713b17ef51556da667000000000000000000000000000000000000000000000000000642e5369cbc79\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"to\":\"0x2ce6311ddae708829bc0784c967b7d77d19fd779\",\"input\":\"0xdd62ed3e000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f730000000000000000000000004752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x23b872dd000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f7300000000000000000000000088a43bbdf9d098eec7bceda4e2494615dfd9bb9c00000000000000000000000000000000000000000000000000000000004c10a8\",\"value\":\"0x0\",\"calltype\":\"call\"}},{\"action\":{\"from\":\"0x2f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"to\":\"0x0b3e328455c4059eeb9e3f84b5543f74e24e7e1b\",\"input\":\"0x70a082310000000000000000000000002f0abc43f1e4962934c4f93e1bbd843acef9874a\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0x4752ba5dbc23f44d87826276bf6fd6b1c372ad24\",\"to\":\"0x88a43bbdf9d098eec7bceda4e2494615dfd9bb9c\",\"input\":\"0x0902f1ac\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xde44500b5d1479df5c003bf48915b3e24df3e8dd\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x70a08231000000000000000000000000de44500b5d1479df5c003bf48915b3e24df3e8dd\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}},{\"action\":{\"from\":\"0xba91a189a713d3d0aad89c8202fa6d98fd763820\",\"to\":\"0x9215e9a88c94b9dcad5b02e32cd5cab2a291458b\",\"input\":\"0xa9059cbb000000000000000000000000a2460f1530139f1cc712d5d1ac9b82cc879271fd00000000000000000000000000000000000000000000005a3986cf626c175417\",\"value\":\"0x0\",\"calltype\":\"delegatecall\"}},{\"action\":{\"from\":\"0xf4763b092a0045e3ef31894bfd283ce1e9960f73\",\"to\":\"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913\",\"input\":\"0x70a08231000000000000000000000000f4763b092a0045e3ef31894bfd283ce1e9960f73\",\"value\":\"0x0\",\"calltype\":\"staticcall\"}}]";
        ammParse.evaluate("0x812ba41e071c7b7fa4ebcfb62df5f45f6fa853ee", "8453", "uniswap"
                , logs, tract, "0x29516fb5f6699286a76545e4815dac6e10da0d3fe492ae661dcadc67aecaf673", "2000");

    }
}
